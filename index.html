<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Registration Form</title>
</head>
<body>
  <form id="registration-form">
    <!-- Parent Information -->
    <input type="text" id="parentName" placeholder="Parent Full Name" required>
    <input type="email" id="parentEmail" placeholder="Parent Email" required>
    <input type="text" id="parentPhone" placeholder="Parent Phone" required>

    <!-- Participant Information -->
    <div id="participants">
      <div class="participant">
        <input type="text" class="firstName" placeholder="First Name" required>
        <input type="text" class="lastName" placeholder="Last Name" required>
        <input type="text" class="dob" placeholder="DOB (MM/DD/YYYY)" required>
        <select class="gender" required>
          <option value="">Select Gender</option>
          <option value="Male">Male</option>
          <option value="Female">Female</option>
        </select>
        <select class="level" required>
          <option value="">Select Soccer Level</option>
          <option value="Recreational">Recreational</option>
          <option value="Travel">Travel</option>
        </select>
      </div>
    </div>

    <button type="button" onclick="addParticipant()">Add Another Participant</button>
    <button type="submit">Submit</button>
  </form>

  <script>
    const form = document.getElementById('registration-form');
    const participantsDiv = document.getElementById('participants');

    function addParticipant() {
      const participantHTML = `
        <div class="participant">
          <input type="text" class="firstName" placeholder="First Name" required>
          <input type="text" class="lastName" placeholder="Last Name" required>
          <input type="text" class="dob" placeholder="DOB (MM/DD/YYYY)" required>
          <select class="gender" required>
            <option value="">Select Gender</option>
            <option value="Male">Male</option>
            <option value="Female">Female</option>
          </select>
          <select class="level" required>
            <option value="">Select Soccer Level</option>
            <option value="Recreational">Recreational</option>
            <option value="Travel">Travel</option>
          </select>
        </div>
      `;
      participantsDiv.insertAdjacentHTML('beforeend', participantHTML);
    }

    form.addEventListener('submit', function(e) {
      e.preventDefault();

      const parentName = document.getElementById('parentName').value;
      const parentEmail = document.getElementById('parentEmail').value;
      const parentPhone = document.getElementById('parentPhone').value;

      const participantElements = document.querySelectorAll('.participant');
      const children = [];

      participantElements.forEach(participant => {
        const firstName = participant.querySelector('.firstName').value;
        const lastName = participant.querySelector('.lastName').value;
        const dob = participant.querySelector('.dob').value;
        const gender = participant.querySelector('.gender').value;
        const level = participant.querySelector('.level').value;

        children.push({ firstName, lastName, dob, gender, level });
      });

      const formData = {
        parentName,
        parentEmail,
        parentPhone,
        children
      };

      fetch('https://script.google.com/macros/s/AKfycbxxtQnrbYjg06wBU30dmORSk3ef_bDZ-Qju5vaLJXx14vM80bNKFbsOo59GA_8do0Nw/exec', {
              method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify(formData)
      })
      .then(response => response.json())
      .then(data => {
        console.log('Success:', data);
      })
      .catch((error) => {
        console.error('Error:', error);
      });
    });
  </script>
</body>
</html>
