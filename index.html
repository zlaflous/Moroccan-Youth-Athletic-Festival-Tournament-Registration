
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Moroccan Youth Athletic Festival - Spring 2025 Registration</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.4/css/bulma.min.css">
  <script src="https://www.paypal.com/sdk/js?client-id=ASNXc-c_Ozu9IRC4ILp5oC6VOLz18amVlbYfVnKYA2kvJIBlQnoLUPP-Rdz4J_vyMD5toHUwg-OQH-OX&currency=USD"></script>
  <style>
    .masar-logo { max-height: 120px; background-color: #00c4cc; border-radius: 8px; padding: 4px; }
  </style>
</head>
<body>
  <!-- HERO SECTION -->
  <section class="hero is-primary is-bold">
    <div class="hero-body">
      <div class="container">
        <div class="columns is-vcentered">
          <div class="column has-text-centered">
            <h1 class="title">Moroccan Youth Athletic Festival - Spring 2025</h1>
            <h2 class="subtitle is-4">Registration Form</h2>
          </div>
          <div class="column is-narrow">
            <figure class="image is-128x128">
              <img src="https://github.com/zlaflous/Moroccan-Youth-Athletic-Festival-Tournament-Registration/blob/main/MASAR_Logo_Transparent%20(1).png?raw=true" alt="MASAR Logo" class="masar-logo">
            </figure>
          </div>
        </div>
      </div>
    </div>
  </section>

  <form id="form" class="container m-4 pl-4" method="POST">
    <!-- Parent Info -->
    <h2 class="title is-4 mt-5">Parent Information</h2>
    <div class="field">
      <label class="label">Full Name</label>
      <div class="control">
        <input class="input" type="text" name="Parent Full Name" required>
      </div>
    </div>
    <div class="field">
      <label class="label">Email</label>
      <div class="control">
        <input class="input" type="email" name="Parent Email" required>
      </div>
    </div>
    <div class="field">
      <label class="label">Phone Number</label>
      <div class="control">
        <input class="input" type="tel" name="Parent Phone" required>
      </div>
    </div>

    <!-- Participant Info -->
    <h2 class="title is-4 mt-5">Participant Information</h2>
    <div id="participants-container"></div>
    <div class="field">
      <div class="control">
        <button class="button is-info" type="button" onclick="addParticipant()">Add Participant</button>
      </div>
    </div>

    <!-- Waiver Section -->
    <h2 class="title is-4 mt-5">Waiver & Consent</h2>
    <div class="field">
      <div class="control">
        <textarea class="textarea" readonly>I, the parent or legal guardian of the participant, give permission for my child to take part...</textarea>
      </div>
    </div>
    <div class="field">
      <div class="control">
        <label class="checkbox">
          <input type="checkbox" name="Waiver Consent" required> I agree to the Waiver & Consent.
        </label>
      </div>
    </div>

    <!-- Payment Section -->
    <div id="total-due" class="notification is-info" style="display: none; font-weight: bold;"></div>
    <div id="proceed-container" class="field mt-5">
      <div class="control">
        <button class="button is-warning" type="button" onclick="startPayPal()">Proceed to Payment</button>
      </div>
    </div>
    <div id="paypal-button-container" style="display:none;" class="mt-4"></div>

    <div class="field is-grouped mt-4">
      <div class="control">
        <button class="button is-primary" type="submit" id="submit-button" disabled>Submit</button>
      </div>
      <div class="control">
        <button class="button is-danger" type="reset">Cancel</button>
      </div>
    </div>
  </form>

  <script>
    function updateTotalAmount() {
      const participantCount = document.querySelectorAll('#participants-container .box').length;
      const totalDueDiv = document.getElementById('total-due');
      if (participantCount > 0) {
        totalDueDiv.style.display = 'block';
        totalDueDiv.textContent = `Total Due: $${participantCount * 10}`;
      } else {
        totalDueDiv.style.display = 'none';
      }
    }
    function addParticipant() {
      const container = document.getElementById('participants-container');
      const id = `participant-${Date.now()}`;
      container.insertAdjacentHTML('beforeend', `
        <div class="box mt-4" id="${id}">
          <h3 class="title is-5">Participant</h3>
          <div class="field"><input class="input" type="text" name="Participant First Name[]" placeholder="First Name" required></div>
          <div class="field"><input class="input" type="text" name="Participant Last Name[]" placeholder="Last Name" required></div>
          <div class="field"><input class="input" type="date" name="Participant DOB[]" required></div>
          <div class="field">
            <label class="radio"><input type="radio" name="Gender[${container.children.length}]" value="male" required> Male</label>
            <label class="radio"><input type="radio" name="Gender[${container.children.length}]" value="female"> Female</label>
          </div>
        </div>`);
      updateTotalAmount();
    }
    function startPayPal() {
      const parentName = document.querySelector('input[name="Parent Full Name"]').value.trim();
      const parentEmail = document.querySelector('input[name="Parent Email"]').value.trim();
      const parentPhone = document.querySelector('input[name="Parent Phone"]').value.trim();
      const waiverConsent = document.querySelector('input[name="Waiver Consent"]:checked');

      if (!parentName || !parentEmail || !parentPhone || !waiverConsent) {
        alert('Please complete all fields and agree to the waiver before payment.');
        return;
      }
      const participantBoxes = document.querySelectorAll('#participants-container .box');
      if (participantBoxes.length === 0) {
        alert('Please add at least one participant.');
        return;
      }

      document.getElementById('proceed-container').style.display = 'none';
      document.getElementById('paypal-button-container').style.display = 'block';

      paypal.Buttons({
        createOrder: function(data, actions) {
          const totalAmount = participantBoxes.length * 10;
          return actions.order.create({ purchase_units: [{ amount: { value: totalAmount.toFixed(2) } }] });
        },
        onApprove: function(data, actions) {
          return actions.order.capture().then(function(details) {
            alert('Payment completed by ' + details.payer.name.given_name);
            document.getElementById('submit-button').disabled = false;
          });
        }
      }).render('#paypal-button-container');
    }
    document.getElementById('form').addEventListener('submit', function(e) {
      e.preventDefault();
      window.location.href = "thank-you.html";
    });
  </script>
</body>
</html>
